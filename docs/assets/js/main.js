"use strict";const listCharacters=document.querySelector(".js-characters-list");let characters=[];const searchBtn=document.querySelector(".js-search-btn"),searchBar=document.querySelector(".js-search-bar");let favourites=[];const listFavCharacters=document.querySelector(".js-favourite-characters"),resetBtn=document.querySelector(".js-reset-btn");function renderCharacters(e){let a="",r="";for(const t of e){r=-1===favourites.findIndex(e=>e.char_id===t.char_id)?"":"fav",a+=`<li class="item js-character ${r} " id="${t.char_id}"> <article class="character">`,a+=`<img class="character__image"src="${t.img}">`,a+=`<h2 class="character__name">${t.name}</h2>`,a+=`<p class="character__dead">${t.status}</p>`,a+="</article> </li>"}listCharacters.innerHTML=a,favouriteCharacters()}function renderFavCharacters(e){let a="";for(const r of e)a+=`<li class="item js-character" id="${r.char_id}"> <article class="character">`,a+=`<img class="character__image"src="${r.img}">`,a+=`<h2 class="character__name">${r.name}</h2>`,a+=`<p class="character__dead">${r.status}</p>`,a+="</article> </li>";listFavCharacters.innerHTML=a}function getData(){fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{characters=e,renderCharacters(characters)});const e=JSON.parse(localStorage.getItem("Favourite Characters"));console.log(e),null!==e&&(favourites=e,renderFavCharacters(favourites))}function handleClickbtn(e){e.preventDefault();const a=searchBar.value.toLowerCase();renderCharacters(characters.filter(e=>e.name.toLowerCase().includes(a)))}function handleClickfav(e){e.currentTarget.classList.toggle("fav");const a=parseInt(e.currentTarget.id),r=characters.find((function(e){return e.char_id===a})),t=favourites.findIndex(e=>e.char_id===a);-1===t?(favourites.push(r),renderFavCharacters(favourites),localStorage.setItem("Favourite Characters",JSON.stringify(favourites))):(favourites.splice(t,1),renderFavCharacters(favourites),localStorage.setItem("Favourite Characters",JSON.stringify(favourites))),console.log(favourites)}function favouriteCharacters(){const e=document.querySelectorAll(".js-character");for(const a of e)a.addEventListener("click",handleClickfav)}getData(),searchBtn.addEventListener("click",handleClickbtn),resetBtn.addEventListener("click",e=>{e.preventDefault(),listFavCharacters.innerHTML="",localStorage.clear(),favourites.length=0,renderCharacters(characters)});